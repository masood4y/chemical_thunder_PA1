<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ELEC 331 PA1: src/receiver.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">ELEC 331 PA1
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">receiver.c File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &lt;arpa/inet.h&gt;</code><br />
<code>#include &lt;netinet/in.h&gt;</code><br />
<code>#include &lt;sys/types.h&gt;</code><br />
<code>#include &lt;sys/socket.h&gt;</code><br />
<code>#include &lt;unistd.h&gt;</code><br />
<code>#include &lt;pthread.h&gt;</code><br />
<code>#include &lt;errno.h&gt;</code><br />
<code>#include &quot;<a class="el" href="our__protocol_8h_source.html">our_protocol.h</a>&quot;</code><br />
<code>#include &lt;fcntl.h&gt;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a36aa9ad4c7240fb5af3d0dfa6b0c95d1" id="r_a36aa9ad4c7240fb5af3d0dfa6b0c95d1"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a36aa9ad4c7240fb5af3d0dfa6b0c95d1">LONG_TIMER_MS</a>&#160;&#160;&#160;5000</td></tr>
<tr class="separator:a36aa9ad4c7240fb5af3d0dfa6b0c95d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f86f9a299c523ed84a4e79280389d58" id="r_a3f86f9a299c523ed84a4e79280389d58"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3f86f9a299c523ed84a4e79280389d58">SHORT_TIMER_MS</a>&#160;&#160;&#160;3</td></tr>
<tr class="separator:a3f86f9a299c523ed84a4e79280389d58"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b20d41d6252e9871430c242cb1a56e7" id="r_a6b20d41d6252e9871430c242cb1a56e7"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6b20d41d6252e9871430c242cb1a56e7">BUFFER_SIZE</a>&#160;&#160;&#160;(sizeof(struct <a class="el" href="structprotocol___packet.html">protocol_Packet</a>) + 16)</td></tr>
<tr class="separator:a6b20d41d6252e9871430c242cb1a56e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a130dc017a7345f294114fc4b84dbcbe4" id="r_a130dc017a7345f294114fc4b84dbcbe4"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a130dc017a7345f294114fc4b84dbcbe4">MAX_PACKETS_IN_WINDOW</a>&#160;&#160;&#160;(<a class="el" href="our__protocol_8h.html#a52e7bfd213b4cf538c75ac8b8f099ab9">MAX_WINDOW_SIZE</a> / <a class="el" href="our__protocol_8h.html#aebdc7d8ca8e25ed8efc90bb88ef7ef5b">PACKET_SIZE</a>)</td></tr>
<tr class="separator:a130dc017a7345f294114fc4b84dbcbe4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="enum-members" name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:aeb5e52287f5a64a995229e29c736a178" id="r_aeb5e52287f5a64a995229e29c736a178"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aeb5e52287f5a64a995229e29c736a178">receiver_state</a> { <br />
&#160;&#160;<a class="el" href="#aeb5e52287f5a64a995229e29c736a178a2929ab705b4e1b23990cbb194b496b23">Wait_Connection</a>
, <a class="el" href="#aeb5e52287f5a64a995229e29c736a178a5562a907ad8a9c1e6f571f2c7349ecbf">Wait_for_Packet</a>
, <a class="el" href="#aeb5e52287f5a64a995229e29c736a178a8a4445b074c237002a84118e4725328a">Wait_for_Pipeline</a>
, <a class="el" href="#aeb5e52287f5a64a995229e29c736a178a0cb55e1e176ecfe597cdc09152299461">Send_Fin_Ack</a>
, <br />
&#160;&#160;<a class="el" href="#aeb5e52287f5a64a995229e29c736a178a5c7e361c16374fa72dc35dbb72fcfd29">Wait_inCase</a>
, <a class="el" href="#aeb5e52287f5a64a995229e29c736a178ab68c130eb6caa378c2c394e9054bbb63">Finished</a>
<br />
 }</td></tr>
<tr class="separator:aeb5e52287f5a64a995229e29c736a178"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a673c8779dec6dfb87eff45cb42cff4bf" id="r_a673c8779dec6dfb87eff45cb42cff4bf"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a673c8779dec6dfb87eff45cb42cff4bf">receiver_init</a> (unsigned short int myUDPport, char *destinationFile, unsigned long long int writeRate)</td></tr>
<tr class="memdesc:a673c8779dec6dfb87eff45cb42cff4bf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the receiver with the specified UDP port, destination file, and write rate.  <br /></td></tr>
<tr class="separator:a673c8779dec6dfb87eff45cb42cff4bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad4579d3091294ef4fa4d708c15ef7c9c" id="r_ad4579d3091294ef4fa4d708c15ef7c9c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad4579d3091294ef4fa4d708c15ef7c9c">setup_socket</a> (unsigned short int myUDPport)</td></tr>
<tr class="memdesc:ad4579d3091294ef4fa4d708c15ef7c9c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets up the UDP socket for the receiver.  <br /></td></tr>
<tr class="separator:ad4579d3091294ef4fa4d708c15ef7c9c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af9c984477ed6745b60bf61c97e6fc7f1" id="r_af9c984477ed6745b60bf61c97e6fc7f1"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af9c984477ed6745b60bf61c97e6fc7f1">setup_file</a> (char *destinationFile)</td></tr>
<tr class="memdesc:af9c984477ed6745b60bf61c97e6fc7f1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets up the file for writing received data.  <br /></td></tr>
<tr class="separator:af9c984477ed6745b60bf61c97e6fc7f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0408e8c1a9226ebefed7869f204d054b" id="r_a0408e8c1a9226ebefed7869f204d054b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0408e8c1a9226ebefed7869f204d054b">setup_recv_window</a> (void)</td></tr>
<tr class="memdesc:a0408e8c1a9226ebefed7869f204d054b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the receiver's window for packet processing.  <br /></td></tr>
<tr class="separator:a0408e8c1a9226ebefed7869f204d054b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a41275a0f0717d9912dcecafbcdfdc8" id="r_a4a41275a0f0717d9912dcecafbcdfdc8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4a41275a0f0717d9912dcecafbcdfdc8">receiver_finish</a> (void)</td></tr>
<tr class="memdesc:a4a41275a0f0717d9912dcecafbcdfdc8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Cleans up resources used by the receiver.  <br /></td></tr>
<tr class="separator:a4a41275a0f0717d9912dcecafbcdfdc8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac777be4472f0072eae59d0746d087d4a" id="r_ac777be4472f0072eae59d0746d087d4a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac777be4472f0072eae59d0746d087d4a">is_SYNC</a> (struct <a class="el" href="structprotocol___packet.html">protocol_Packet</a> *receive_buffer)</td></tr>
<tr class="memdesc:ac777be4472f0072eae59d0746d087d4a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks if the incoming packet is a valid SYNC packet.  <br /></td></tr>
<tr class="separator:ac777be4472f0072eae59d0746d087d4a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad12cb6ed25a1a8af544cfb52c2b25a2e" id="r_ad12cb6ed25a1a8af544cfb52c2b25a2e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad12cb6ed25a1a8af544cfb52c2b25a2e">is_data</a> (struct <a class="el" href="structprotocol___packet.html">protocol_Packet</a> *receive_buffer)</td></tr>
<tr class="memdesc:ad12cb6ed25a1a8af544cfb52c2b25a2e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks if the incoming packet is a data packet.  <br /></td></tr>
<tr class="separator:ad12cb6ed25a1a8af544cfb52c2b25a2e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adcca714f63ac705a8afcc4a23b93b137" id="r_adcca714f63ac705a8afcc4a23b93b137"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#adcca714f63ac705a8afcc4a23b93b137">is_FIN</a> (struct <a class="el" href="structprotocol___packet.html">protocol_Packet</a> *receive_buffer)</td></tr>
<tr class="memdesc:adcca714f63ac705a8afcc4a23b93b137"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks if the incoming packet is a valid FIN packet.  <br /></td></tr>
<tr class="separator:adcca714f63ac705a8afcc4a23b93b137"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a603e10550500ba3530d93b200cbabe53" id="r_a603e10550500ba3530d93b200cbabe53"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a603e10550500ba3530d93b200cbabe53">is_duplicate</a> (uint32_t seq_num)</td></tr>
<tr class="memdesc:a603e10550500ba3530d93b200cbabe53"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks if the incoming sequence number is a duplicate.  <br /></td></tr>
<tr class="separator:a603e10550500ba3530d93b200cbabe53"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad0c95a5f6527d466350443cd81b833a5" id="r_ad0c95a5f6527d466350443cd81b833a5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad0c95a5f6527d466350443cd81b833a5">receiver_action_Wait_Connection</a> (void)</td></tr>
<tr class="memdesc:ad0c95a5f6527d466350443cd81b833a5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handles the Wait Connection state of the receiver.  <br /></td></tr>
<tr class="separator:ad0c95a5f6527d466350443cd81b833a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb49a1968d8212126e1bcc417cd24180" id="r_acb49a1968d8212126e1bcc417cd24180"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#acb49a1968d8212126e1bcc417cd24180">receiver_action_Wait_for_Packet</a> (void)</td></tr>
<tr class="memdesc:acb49a1968d8212126e1bcc417cd24180"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handles the Wait for Packet state of the receiver.  <br /></td></tr>
<tr class="separator:acb49a1968d8212126e1bcc417cd24180"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b4281dbfc0af369e5f486568880e50e" id="r_a1b4281dbfc0af369e5f486568880e50e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1b4281dbfc0af369e5f486568880e50e">receiver_action_Wait_for_Pipeline</a> (void)</td></tr>
<tr class="memdesc:a1b4281dbfc0af369e5f486568880e50e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handles the Wait for Pipeline state of the receiver.  <br /></td></tr>
<tr class="separator:a1b4281dbfc0af369e5f486568880e50e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf3a6b6abbe478e75ea6df3d9d1dba0b" id="r_abf3a6b6abbe478e75ea6df3d9d1dba0b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#abf3a6b6abbe478e75ea6df3d9d1dba0b">add_data_to_buffer</a> (struct <a class="el" href="structprotocol___packet.html">protocol_Packet</a> *receive_buffer)</td></tr>
<tr class="memdesc:abf3a6b6abbe478e75ea6df3d9d1dba0b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds data from a received packet to the buffer.  <br /></td></tr>
<tr class="separator:abf3a6b6abbe478e75ea6df3d9d1dba0b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad2e9228b482b59472ef989421b0a44a5" id="r_ad2e9228b482b59472ef989421b0a44a5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad2e9228b482b59472ef989421b0a44a5">receiver_action_Send_Fin_Ack</a> (void)</td></tr>
<tr class="memdesc:ad2e9228b482b59472ef989421b0a44a5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends a FIN_ACK packet to the sender.  <br /></td></tr>
<tr class="separator:ad2e9228b482b59472ef989421b0a44a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f5855dc7eede31fbd971ab48bf49e55" id="r_a6f5855dc7eede31fbd971ab48bf49e55"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6f5855dc7eede31fbd971ab48bf49e55">receiver_action_Wait_inCase</a> (void)</td></tr>
<tr class="memdesc:a6f5855dc7eede31fbd971ab48bf49e55"><td class="mdescLeft">&#160;</td><td class="mdescRight">Waits for a long duration in case another FIN packet is received.  <br /></td></tr>
<tr class="separator:a6f5855dc7eede31fbd971ab48bf49e55"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab41fdd85753470e49e9439d9e096947b" id="r_ab41fdd85753470e49e9439d9e096947b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab41fdd85753470e49e9439d9e096947b">rrecv</a> (unsigned short int myUDPport, char *destinationFile, unsigned long long int writeRate)</td></tr>
<tr class="memdesc:ab41fdd85753470e49e9439d9e096947b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Main state machine for the receiver.  <br /></td></tr>
<tr class="separator:ab41fdd85753470e49e9439d9e096947b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c04138a5bfe5d72780bb7e82a18e627" id="r_a3c04138a5bfe5d72780bb7e82a18e627"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3c04138a5bfe5d72780bb7e82a18e627">main</a> (int argc, char **argv)</td></tr>
<tr class="memdesc:a3c04138a5bfe5d72780bb7e82a18e627"><td class="mdescLeft">&#160;</td><td class="mdescRight">Main function for the receiver application.  <br /></td></tr>
<tr class="separator:a3c04138a5bfe5d72780bb7e82a18e627"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a6b20d41d6252e9871430c242cb1a56e7" name="a6b20d41d6252e9871430c242cb1a56e7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6b20d41d6252e9871430c242cb1a56e7">&#9670;&#160;</a></span>BUFFER_SIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BUFFER_SIZE&#160;&#160;&#160;(sizeof(struct <a class="el" href="structprotocol___packet.html">protocol_Packet</a>) + 16)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a36aa9ad4c7240fb5af3d0dfa6b0c95d1" name="a36aa9ad4c7240fb5af3d0dfa6b0c95d1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a36aa9ad4c7240fb5af3d0dfa6b0c95d1">&#9670;&#160;</a></span>LONG_TIMER_MS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LONG_TIMER_MS&#160;&#160;&#160;5000</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a130dc017a7345f294114fc4b84dbcbe4" name="a130dc017a7345f294114fc4b84dbcbe4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a130dc017a7345f294114fc4b84dbcbe4">&#9670;&#160;</a></span>MAX_PACKETS_IN_WINDOW</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_PACKETS_IN_WINDOW&#160;&#160;&#160;(<a class="el" href="our__protocol_8h.html#a52e7bfd213b4cf538c75ac8b8f099ab9">MAX_WINDOW_SIZE</a> / <a class="el" href="our__protocol_8h.html#aebdc7d8ca8e25ed8efc90bb88ef7ef5b">PACKET_SIZE</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a3f86f9a299c523ed84a4e79280389d58" name="a3f86f9a299c523ed84a4e79280389d58"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3f86f9a299c523ed84a4e79280389d58">&#9670;&#160;</a></span>SHORT_TIMER_MS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SHORT_TIMER_MS&#160;&#160;&#160;3</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="aeb5e52287f5a64a995229e29c736a178" name="aeb5e52287f5a64a995229e29c736a178"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeb5e52287f5a64a995229e29c736a178">&#9670;&#160;</a></span>receiver_state</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="#aeb5e52287f5a64a995229e29c736a178">receiver_state</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="aeb5e52287f5a64a995229e29c736a178a2929ab705b4e1b23990cbb194b496b23" name="aeb5e52287f5a64a995229e29c736a178a2929ab705b4e1b23990cbb194b496b23"></a>Wait_Connection&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="aeb5e52287f5a64a995229e29c736a178a5562a907ad8a9c1e6f571f2c7349ecbf" name="aeb5e52287f5a64a995229e29c736a178a5562a907ad8a9c1e6f571f2c7349ecbf"></a>Wait_for_Packet&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="aeb5e52287f5a64a995229e29c736a178a8a4445b074c237002a84118e4725328a" name="aeb5e52287f5a64a995229e29c736a178a8a4445b074c237002a84118e4725328a"></a>Wait_for_Pipeline&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="aeb5e52287f5a64a995229e29c736a178a0cb55e1e176ecfe597cdc09152299461" name="aeb5e52287f5a64a995229e29c736a178a0cb55e1e176ecfe597cdc09152299461"></a>Send_Fin_Ack&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="aeb5e52287f5a64a995229e29c736a178a5c7e361c16374fa72dc35dbb72fcfd29" name="aeb5e52287f5a64a995229e29c736a178a5c7e361c16374fa72dc35dbb72fcfd29"></a>Wait_inCase&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="aeb5e52287f5a64a995229e29c736a178ab68c130eb6caa378c2c394e9054bbb63" name="aeb5e52287f5a64a995229e29c736a178ab68c130eb6caa378c2c394e9054bbb63"></a>Finished&#160;</td><td class="fielddoc"></td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="abf3a6b6abbe478e75ea6df3d9d1dba0b" name="abf3a6b6abbe478e75ea6df3d9d1dba0b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abf3a6b6abbe478e75ea6df3d9d1dba0b">&#9670;&#160;</a></span>add_data_to_buffer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void add_data_to_buffer </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structprotocol___packet.html">protocol_Packet</a> *</td>          <td class="paramname"><span class="paramname"><em>receive_buffer</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Adds data from a received packet to the buffer. </p>
<p>This function processes the received packet and adds its data to the buffer. It calculates the buffer index based on the sequence number and stores the data accordingly. It also updates the indices for the first and last valid buffer positions.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">receive_buffer</td><td>Pointer to the received protocol packet. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ad12cb6ed25a1a8af544cfb52c2b25a2e" name="ad12cb6ed25a1a8af544cfb52c2b25a2e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad12cb6ed25a1a8af544cfb52c2b25a2e">&#9670;&#160;</a></span>is_data()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int is_data </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structprotocol___packet.html">protocol_Packet</a> *</td>          <td class="paramname"><span class="paramname"><em>receive_buffer</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checks if the incoming packet is a data packet. </p>
<p>This function checks if the management_byte in the packet header is zero, indicating a data packet.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">receive_buffer</td><td>Pointer to the received protocol packet. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns 1 if it's a data packet, 0 otherwise. </dd></dl>

</div>
</div>
<a id="a603e10550500ba3530d93b200cbabe53" name="a603e10550500ba3530d93b200cbabe53"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a603e10550500ba3530d93b200cbabe53">&#9670;&#160;</a></span>is_duplicate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int is_duplicate </td>
          <td>(</td>
          <td class="paramtype">uint32_t</td>          <td class="paramname"><span class="paramname"><em>seq_num</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checks if the incoming sequence number is a duplicate. </p>
<p>Determines whether the specified sequence number has already been received. This is used to identify and handle duplicate packets.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">seq_num</td><td>The sequence number to check. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns 1 if the sequence number is a duplicate, 0 otherwise. </dd></dl>

</div>
</div>
<a id="adcca714f63ac705a8afcc4a23b93b137" name="adcca714f63ac705a8afcc4a23b93b137"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adcca714f63ac705a8afcc4a23b93b137">&#9670;&#160;</a></span>is_FIN()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int is_FIN </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structprotocol___packet.html">protocol_Packet</a> *</td>          <td class="paramname"><span class="paramname"><em>receive_buffer</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checks if the incoming packet is a valid FIN packet. </p>
<p>This function checks the management_byte in the packet header to determine if the FIN bit (second from the right) is set, indicating a FIN packet.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">receive_buffer</td><td>Pointer to the received protocol packet. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns 1 if it's a FIN packet, 0 otherwise. </dd></dl>

</div>
</div>
<a id="ac777be4472f0072eae59d0746d087d4a" name="ac777be4472f0072eae59d0746d087d4a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac777be4472f0072eae59d0746d087d4a">&#9670;&#160;</a></span>is_SYNC()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int is_SYNC </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structprotocol___packet.html">protocol_Packet</a> *</td>          <td class="paramname"><span class="paramname"><em>receive_buffer</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checks if the incoming packet is a valid SYNC packet. </p>
<p>This function checks the management_byte in the packet header to determine if the SYNC bit (upper-most bit) is set, indicating a SYNC packet.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">receive_buffer</td><td>Pointer to the received protocol packet. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns 1 if it's a SYNC packet, 0 otherwise. </dd></dl>

</div>
</div>
<a id="a3c04138a5bfe5d72780bb7e82a18e627" name="a3c04138a5bfe5d72780bb7e82a18e627"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3c04138a5bfe5d72780bb7e82a18e627">&#9670;&#160;</a></span>main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>argc</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **</td>          <td class="paramname"><span class="paramname"><em>argv</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Main function for the receiver application. </p>
<p>This function parses command line arguments to set up the UDP port and destination file. It then calls the rrecv function to start the receiver process.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">argc</td><td>Number of command-line arguments. </td></tr>
    <tr><td class="paramname">argv</td><td>Array of command-line arguments. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns the exit status. </dd></dl>

</div>
</div>
<a id="ad2e9228b482b59472ef989421b0a44a5" name="ad2e9228b482b59472ef989421b0a44a5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad2e9228b482b59472ef989421b0a44a5">&#9670;&#160;</a></span>receiver_action_Send_Fin_Ack()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void receiver_action_Send_Fin_Ack </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sends a FIN_ACK packet to the sender. </p>
<p>This function constructs a FIN_ACK packet and sends it to the sender. It is called when a FIN packet is received, indicating the end of data transmission. The function also starts a long timer and sets the receiver's state to Wait_inCase. </p>

</div>
</div>
<a id="ad0c95a5f6527d466350443cd81b833a5" name="ad0c95a5f6527d466350443cd81b833a5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad0c95a5f6527d466350443cd81b833a5">&#9670;&#160;</a></span>receiver_action_Wait_Connection()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void receiver_action_Wait_Connection </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Handles the Wait Connection state of the receiver. </p>
<p>Waits for a SYNC packet from the sender to establish a connection. Upon receiving a SYNC packet, sends a SYNC ACK back to the sender. </p>

</div>
</div>
<a id="acb49a1968d8212126e1bcc417cd24180" name="acb49a1968d8212126e1bcc417cd24180"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acb49a1968d8212126e1bcc417cd24180">&#9670;&#160;</a></span>receiver_action_Wait_for_Packet()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void receiver_action_Wait_for_Packet </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Handles the Wait for Packet state of the receiver. </p>
<p>Waits for data packets from the sender. Processes received packets, checks for duplicates, and handles SYNC and FIN packets. </p>

</div>
</div>
<a id="a1b4281dbfc0af369e5f486568880e50e" name="a1b4281dbfc0af369e5f486568880e50e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1b4281dbfc0af369e5f486568880e50e">&#9670;&#160;</a></span>receiver_action_Wait_for_Pipeline()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void receiver_action_Wait_for_Pipeline </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Handles the Wait for Pipeline state of the receiver. </p>
<p>Waits for additional packets in the pipeline. Processes received data packets, checks for duplicates, and handles writing data to the file after a short timer. </p>

</div>
</div>
<a id="a6f5855dc7eede31fbd971ab48bf49e55" name="a6f5855dc7eede31fbd971ab48bf49e55"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6f5855dc7eede31fbd971ab48bf49e55">&#9670;&#160;</a></span>receiver_action_Wait_inCase()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void receiver_action_Wait_inCase </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Waits for a long duration in case another FIN packet is received. </p>
<p>This function waits for a specified long duration to handle any additional FIN packets that may arrive. It ensures that the receiver properly finalizes the connection. </p>

</div>
</div>
<a id="a4a41275a0f0717d9912dcecafbcdfdc8" name="a4a41275a0f0717d9912dcecafbcdfdc8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4a41275a0f0717d9912dcecafbcdfdc8">&#9670;&#160;</a></span>receiver_finish()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void receiver_finish </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Cleans up resources used by the receiver. </p>
<p>This function frees the allocated buffer for received bytes, closes the open file (if any), and closes the socket. It is used to clean up resources before the receiver shuts down. </p>

</div>
</div>
<a id="a673c8779dec6dfb87eff45cb42cff4bf" name="a673c8779dec6dfb87eff45cb42cff4bf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a673c8779dec6dfb87eff45cb42cff4bf">&#9670;&#160;</a></span>receiver_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int receiver_init </td>
          <td>(</td>
          <td class="paramtype">unsigned short int</td>          <td class="paramname"><span class="paramname"><em>myUDPport</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *</td>          <td class="paramname"><span class="paramname"><em>destinationFile</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long long int</td>          <td class="paramname"><span class="paramname"><em>writeRate</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes the receiver with the specified UDP port, destination file, and write rate. </p>
<p>Sets up a UDP socket, prepares the destination file for writing, initializes the receiver's window and state, and allocates memory for buffering incoming data.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">myUDPport</td><td>The UDP port to bind the receiver socket to. </td></tr>
    <tr><td class="paramname">destinationFile</td><td>The path to the file where the received data will be written. </td></tr>
    <tr><td class="paramname">writeRate</td><td>The rate at which data will be written to the file. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns 1 on successful initialization, 0 on failure. </dd></dl>

</div>
</div>
<a id="ab41fdd85753470e49e9439d9e096947b" name="ab41fdd85753470e49e9439d9e096947b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab41fdd85753470e49e9439d9e096947b">&#9670;&#160;</a></span>rrecv()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rrecv </td>
          <td>(</td>
          <td class="paramtype">unsigned short int</td>          <td class="paramname"><span class="paramname"><em>myUDPport</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *</td>          <td class="paramname"><span class="paramname"><em>destinationFile</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long long int</td>          <td class="paramname"><span class="paramname"><em>writeRate</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Main state machine for the receiver. </p>
<p>This function initializes the receiver and then continually processes states as part of the main state machine. Handles different states like waiting for connection, waiting for a packet, processing the packet pipeline, sending a FIN ACK, and a waiting state post-FIN ACK. This exits once the receiver reaches the Finished state.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">myUDPport</td><td>The UDP port to bind the receiver socket to. </td></tr>
    <tr><td class="paramname">destinationFile</td><td>The path to the file where the received data will be written. </td></tr>
    <tr><td class="paramname">writeRate</td><td>The rate at which data will be written to the file. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="af9c984477ed6745b60bf61c97e6fc7f1" name="af9c984477ed6745b60bf61c97e6fc7f1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af9c984477ed6745b60bf61c97e6fc7f1">&#9670;&#160;</a></span>setup_file()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int setup_file </td>
          <td>(</td>
          <td class="paramtype">char *</td>          <td class="paramname"><span class="paramname"><em>destinationFile</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets up the file for writing received data. </p>
<p>This function opens the specified file for writing. If the file cannot be opened, an error message is displayed, and the function returns 0. On successful opening, the file pointer is stored in a global variable for later use.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">destinationFile</td><td>The path to the file where the received data will be written. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns 1 if the file is successfully opened, 0 otherwise. </dd></dl>

</div>
</div>
<a id="a0408e8c1a9226ebefed7869f204d054b" name="a0408e8c1a9226ebefed7869f204d054b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0408e8c1a9226ebefed7869f204d054b">&#9670;&#160;</a></span>setup_recv_window()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void setup_recv_window </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes the receiver's window for packet processing. </p>
<p>This function sets up the initial state for the receiver's window, including the sequence number of the next needed packet and the anticipated range of packet sequence numbers. </p>

</div>
</div>
<a id="ad4579d3091294ef4fa4d708c15ef7c9c" name="ad4579d3091294ef4fa4d708c15ef7c9c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad4579d3091294ef4fa4d708c15ef7c9c">&#9670;&#160;</a></span>setup_socket()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int setup_socket </td>
          <td>(</td>
          <td class="paramtype">unsigned short int</td>          <td class="paramname"><span class="paramname"><em>myUDPport</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets up the UDP socket for the receiver. </p>
<p>Creates a UDP socket, sets it to non-blocking mode, and binds it to the specified UDP port. Prepares the socket for receiving data on the given port.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">myUDPport</td><td>The UDP port number to bind the socket to. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns 1 if the socket is set up successfully, 0 otherwise. </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0
</small></address>
</body>
</html>
